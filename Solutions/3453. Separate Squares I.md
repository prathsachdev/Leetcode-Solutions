<!-- problem:start -->

# [3453. Separate Squares I](https://leetcode.com/problems/separate-squares-i)

## Description

<!-- description:start -->

<p>You are given a 2D integer array <code>squares</code>. Each <code>squares[i] = [x<sub>i</sub>, y<sub>i</sub>, l<sub>i</sub>]</code> represents the coordinates of the bottom-left point and the side length of a square parallel to the x-axis.</p>

<p>Find the <strong>minimum</strong> y-coordinate value of a horizontal line such that the total area of the squares above the line <em>equals</em> the total area of the squares below the line.</p>

<p>Answers within <code>10<sup>-5</sup></code> of the actual answer will be accepted.</p>

<p><strong>Note</strong>: Squares <strong>may</strong> overlap. Overlapping areas should be counted <strong>multiple times</strong>.</p>
<p>&nbsp;</p>

<p><strong class="example">Example 1:</strong></p>
<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">squares = [[0,0,1],[2,2,1]]</span></p>
<p><strong>Output:</strong> <span class="example-io">1.00000</span></p>
<p><strong>Explanation:</strong></p>
<p><img alt="" src="https://assets.leetcode.com/uploads/2025/01/06/4062example1drawio.png" style="width: 378px; height: 352px;" /></p>
<p>Any horizontal line between <code>y = 1</code> and <code>y = 2</code> will have 1 square unit above it and 1 square unit below it. The lowest option is 1.</p>
</div>

<p><strong class="example">Example 2:</strong></p>
<div class="example-block">
<p><strong>Input:</strong> <span class="example-io">squares = [[0,0,2],[1,1,1]]</span></p>
<p><strong>Output:</strong> <span class="example-io">1.16667</span></p>
<p><strong>Explanation:</strong></p>
<p><img alt="" src="https://assets.leetcode.com/uploads/2025/01/15/4062example2drawio.png" style="width: 378px; height: 352px;" /></p>
<p>The areas are:</p>
<ul>
    <li>Below the line: <code>7/6 * 2 (Red) + 1/6 (Blue) = 15/6 = 2.5</code>.</li>
    <li>Above the line: <code>5/6 * 2 (Red) + 5/6 (Blue) = 15/6 = 2.5</code>.</li>
</ul>
<p>Since the areas above and below the line are equal, the output is <code>7/6 = 1.16667</code>.</p>
</div>
<p>&nbsp;</p>

<p><strong>Constraints:</strong></p>
<ul>
    <li><code>1 &lt;= squares.length &lt;= 5 * 10<sup>4</sup></code></li>
    <li><code>squares[i] = [x<sub>i</sub>, y<sub>i</sub>, l<sub>i</sub>]</code></li>
    <li><code>squares[i].length == 3</code></li>
    <li><code>0 &lt;= x<sub>i</sub>, y<sub>i</sub> &lt;= 10<sup>9</sup></code></li>
    <li><code>1 &lt;= l<sub>i</sub> &lt;= 10<sup>9</sup></code></li>
    <li>The total area of all the squares will not exceed <code>10<sup>12</sup></code>.</li>
</ul>
<p>&nbsp;</p>

<!-- description:end -->

## Solutions

<!-- solution:start -->

### **Approach 1: Binary Search**

According to the problem, we need to find a horizontal line such that the total area of squares above the line equals the total area of squares below the line. Since as the $y$ coordinate increases, the area below the line increases and the area above the line decreases, we can use binary search to find the $y$ coordinate of this horizontal line.

We define the left boundary of the binary search as $l = 0$, and the right boundary as $r = \max(y_i + l_i)$, which is the highest point of all squares. Then we calculate the midpoint $mid = (l + r) / 2$ and calculate the area below this horizontal line. If this area is greater than or equal to half of the total area, it means we need to move the right boundary $r$ downward; otherwise, we move the left boundary $l$ upward. We repeat this process until the difference between the left and right boundaries is less than a very small value (e.g., $10^{-5}$).

The time complexity is $O(n \log(MU))$, where $n$ is the number of squares, $M = 10^5$, and $U = \max(y_i + l_i)$. The space complexity is $O(1)$.

<p><strong>Time Complexity:</strong> $O(n \log(MU))$</p>
<p><strong>Space Complexity:</strong> $O(1)$</p>

<!-- tabs:start -->

```java
class Solution {
    public double getMinY(int[][] squares) {
        double minY = 1e9;
        
        for (int[] square : squares) {
            minY = Math.min(minY, (double) square[1]);
        }
        
        return minY;
    }
    
    public double getMaxY(int[][] squares) {
        double maxY = 0;
        
        for (int[] square : squares) {
            maxY = Math.max(maxY, (double) (square[1] + square[2]));
        }
        
        return maxY;
    }
    
    public boolean isLowerAreaGreater(int[][] squares, double line) {
        double lowerArea = 0, upperArea = 0;
        
        for (int[] square : squares) {
            double bottomY = square[1], side = square[2], topY = bottomY + side;
            
            if (topY <= line) {
                lowerArea += side * side;
            } else if (bottomY >= line) {
                upperArea += side * side;
            } else {
                double below = line - bottomY, above = topY - line;
                lowerArea += below * side;
                upperArea += above * side;
            }
        }
        
        return lowerArea >= upperArea;
    }
    
    public double separateSquares(int[][] squares) {
        double minY = getMinY(squares);
        double maxY = getMaxY(squares);
        double precision = 1e-5;
        
        while (maxY - minY > precision) {
            double line = (minY + maxY) / 2;
            
            if (isLowerAreaGreater(squares, line)) {
                maxY = line;
            } else {
                minY = line;
            }
        }
        
        return minY;
    }
}
```

<!-- tabs:end -->

<!-- solution:end -->

<!-- problem:end -->